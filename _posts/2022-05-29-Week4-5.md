---
title: 'ê³¼ì œíšŒê³ : 4-5'
categories: Coursera
tags: Algorithm
author_profile: true
published: true
---
## Coursera ê³¼ì œ íšŒê³ 

### Number of Inversions

```
# Problem Introduction

An inversion of a sequenceğ‘0,ğ‘1, . . . ,ğ‘ğ‘›âˆ’1 is a pair of indices 0 â‰¤ğ‘– <ğ‘— <ğ‘› such
thatğ‘ğ‘– >ğ‘ğ‘— . The number of inversions of a sequence in some sense measures how
close the sequence is to being sorted. For example, a sorted (in non-descending
order) sequence contains no inversions at all, while in a sequence sorted in descending order any two elements constitute an inversion (for a total ofğ‘›(ğ‘› âˆ’ 1)/2
inversions).

# Problem Description

Task.           The goal in this problem is to count the number of inversions of a given sequence.
Input Format.   The first line contains an integer ğ‘›, the next one contains a sequence of integers
                ğ‘0, ğ‘1, . . . , ğ‘ğ‘›âˆ’1.
Constraints.    1 â‰¤ ğ‘› â‰¤ 10^5, 1 â‰¤ ğ‘ğ‘– â‰¤ 10^9 for all 0 â‰¤ ğ‘– < ğ‘›.
Output Format.  Output the number of inversions in the sequence.

# What To Do

This problem can be solved by modifying the merge sort algorithm. For this, we change both the Merge and
MergeSort procedures as follows:
    â€¢ Merge(ğµ, ğ¶) returns the resulting sorted array and the number of pairs (ğ‘, ğ‘) such that ğ‘ âˆˆ ğµ, ğ‘ âˆˆ ğ¶, and ğ‘ > ğ‘;
    â€¢ MergeSort(ğ´) returns a sorted array ğ´ and the number of inversions in ğ´.

```

í•´ë‹¹ ê³¼ì œëŠ” Divide and conquer ì•Œê³ ë¦¬ì¦˜ ì¤‘ í•˜ë‚˜ì¸ merge sortë¥¼ ë³€í˜•í•˜ì—¬ ì£¼ì–´ì§„ ë°°ì—´ ì¤‘ ì„ì˜ì˜ ì›ì†Œ ìŒ ì¤‘ì—ì„œ ë‚´ë¦¼ì°¨ìˆœìœ¼ë¡œ ì •ë ¬ëœ ì¡°í•©ì˜ ê°¯ìˆ˜ë¥¼ ì°¾ëŠ” ë¬¸ì œì˜€ë‹¤. ë­ ë§¤ì£¼ ë°˜ë³µë˜ëŠ” ì—¬íƒ€ ë‹¤ë¥¸ ê³¼ì œì™€ ê°™ì´ ì´ˆë°˜ì—” ì‰½ë‹¤ê°€ ê°ˆ ìˆ˜ë¡ ì–´ë ¤ì›Œ ì§€ëŠ” íŒ¨í„´ì˜ ì¤‘ê°„ì— ìœ„ì¹˜í•œ ë¬¸ì œì˜€ì§€ë§Œ, íŒíŠ¸(What to do)ë¥¼ ë³´ê³ ë„ ë­˜ ì–´ì°Œí•´ì•¼ í•˜ë‚˜ í•œì°¸ ë™ì•ˆ ë© ë•Œë ¸ë˜ ë¬¸ì œë¼ ê¸°ë¡í•˜ê²Œ ë˜ì—ˆë‹¤. (ì‚¬ì‹¤ ë‚¨ì€ ë‘ ë¬¸ì œëŠ” ì•„ì§ë„ ì†ì„ ëª»ëŒ€ê³  ìˆë‹¤)

ì²˜ìŒ íŒíŠ¸ë¥¼ ë´¤ì„ ë•Œ ë“  ìƒê°ì€ ì˜¤ë¦„ì°¨ìˆœìœ¼ë¡œ ë¨¼ì € ì •ë ¬í•˜ë€ ê±´ê°€ ì‹¶ì—ˆë‹¤. í•˜ì§€ë§Œ ì´ë‚´ ë‚´ë¦¼ì°¨ìˆœ ì •ë ¬ì„ ìˆ˜í–‰í•˜ë©´ ì´ˆê¸° ì›ì†Œì˜ ìœ„ì¹˜ë¥¼ ì•Œ ìˆ˜ê°€ ì—†ì–´ ë§ë„ ì•ˆë˜ëŠ” ë°©ë²•ì´ë€ê±¸ ìê°í–ˆë‹¤.

ê·¸ë˜ì„œ ë¶„í•  ê³¼ì •ì— ì§‘ì¤‘í•´ ë¶„í• ì˜ íŠ¹ì§•ì„ ì¡ì•„ë‚´ê³ ì í–ˆë‹¤.

### í•´ê²° ë°©ë²•

>â€œë°°ì—´ì„ ë¶„í• í•œ ë’¤ ì •ë ¬/ë³‘í•© í•˜ëŠ” ê³¼ì •ì—ì„œ ì¢Œì¸¡ ë°°ì—´ê³¼ ìš°ì¸¡ ë°°ì—´ì˜ ì›ì†Œ ìŒ ê´€ê³„ëŠ” ìµœì´ˆì˜ ë°°ì—´ê³¼ ë™ì¼í•˜ë‹¤.â€

ë°°ì—´ì„ ë¶„í• í•˜ê³  ê°ê°ì˜ ë°°ì—´ì„ ì •ë ¬ ë° ë³‘í•©í•˜ëŠ” ê³¼ì •ì—ì„œëŠ” ì›ì†Œê°„ì˜ ê´€ê³„ê°€ ìµœì´ˆ ë°°ì—´ì—ì„œì˜ ê´€ê³„ì™€ ë™ì¼í•˜ë¯€ë¡œ, ë¶„í• ëœ ë°°ì—´ì„ ë³‘í•©í•˜ëŠ” ê³¼ì •ì—ì„œ ì—­ìˆœì˜ ê´€ê³„ë¥¼ ì°¾ì•„ ëª¨ë‘ ë”í•˜ë©´ ìµœì´ˆ ë°°ì—´ì—ì„œì˜ ì—­ìˆœ ì¡°í•©ì˜ ê°œìˆ˜ì™€ ë™ì¼í•´ì§„ë‹¤. ê·¸ë¦¼ì„ í†µí•´ì„œ ë³´ë‹¤ ìì„¸í•˜ê²Œ ì„¤ëª…í•˜ê² ë‹¤.

![array#1](https://s3.us-west-2.amazonaws.com/secure.notion-static.com/20801937-1dee-4db4-b3ae-974e4f751b5b/Untitled.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20220528%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20220528T223352Z&X-Amz-Expires=86400&X-Amz-Signature=d549958687d47e88c833f644513c6e949f590a5cdebbc8ebbd2a1be11263480c&X-Amz-SignedHeaders=host&response-content-disposition=filename%20%3D%22Untitled.png%22&x-id=GetObject)

ìœ„ì™€ ê°™ì´ ì›ì†Œ [2, 3, 9, 2, 9, 7]ë¥¼ ê°–ëŠ” ë°°ì—´ Aê°€ ìˆë‹¤. í•´ë‹¹ ë°°ì—´ì—ì„œ ì—­ìˆœ ì¡°í•©ì„ ì¶©ì¡±í•˜ëŠ” ì¸ë±ìŠ¤ì˜ ì¡°í•©ì€ 1-3, 2-3, 2-5, 4-5ë¡œ ì´ 4ê°œì´ë‹¤.

ë‹¤ìŒì€ í•´ë‹¹ ë°°ì—´ì„ ìµœì†Œ ë‹¨ìœ„ë¡œ ë‚˜ëˆˆ ê²°ê³¼ì´ë‹¤.

![array#2](https://s3.us-west-2.amazonaws.com/secure.notion-static.com/34ae900c-ae12-496f-8a36-d2254a4e8d39/Untitled.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20220528%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20220528T223355Z&X-Amz-Expires=86400&X-Amz-Signature=a2ce8a234f96889c512510a40fc67d65c7df1da99164f278c9b3bfcfaabf35ad&X-Amz-SignedHeaders=host&response-content-disposition=filename%20%3D%22Untitled.png%22&x-id=GetObject)

ì´ì œ í•´ë‹¹ ë°°ì—´ë“¤ì„ ì°¨ë¡€ëŒ€ë¡œ ë³‘í•©/ì •ë ¬í•˜ë©° ì—­ìˆœ ì¡°í•©ì„ ì°¾ì•„ê°€ë³´ê² ë‹¤.

![array#3](https://s3.us-west-2.amazonaws.com/secure.notion-static.com/10177452-dd07-43fa-aa94-107ec473ede5/Untitled.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20220528%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20220528T223359Z&X-Amz-Expires=86400&X-Amz-Signature=c7156b79f35a8bec5b4e393179443fc7ad24d32ba779344829fcad5b778064c6&X-Amz-SignedHeaders=host&response-content-disposition=filename%20%3D%22Untitled.png%22&x-id=GetObject)

ìµœì´ˆ ë°°ì—´ ì¸ë±ìŠ¤ 0,1ì— í•´ë‹¹í•˜ëŠ” ì›ì†Œ 2ì™€ 3ì€ ì˜¤ë¦„ì°¨ìˆœì˜ ê´€ê³„ì— ìˆìœ¼ë¯€ë¡œ, ì—­ìˆœ ì¡°í•©ì— í•´ë‹¹ë˜ì§€ ì•ŠëŠ”ë‹¤.

![array#4](https://s3.us-west-2.amazonaws.com/secure.notion-static.com/7590db46-1092-4680-9307-451c8dc35e3f/Untitled.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20220528%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20220528T223401Z&X-Amz-Expires=86400&X-Amz-Signature=2c4b5a6f37fdc7f262d005e1746d86e2f43fe1b50199c5d9d0ef0270829aa7ce&X-Amz-SignedHeaders=host&response-content-disposition=filename%20%3D%22Untitled.png%22&x-id=GetObject)

ìµœì´ˆ ë°°ì—´ ì¸ë±ìŠ¤ 0,1,2ì— í•´ë‹¹í•˜ëŠ” ë°°ì—´ [2,3]ê³¼ ì›ì†Œ 9 ë˜í•œ ì˜¤ë¦„ì°¨ìˆœ ê´€ê³„ë¡œ, ì—­ìˆœ ì¡°í•©ì— í•´ë‹¹ë˜ì§€ ì•ŠëŠ”ë‹¤.

![array#5](https://s3.us-west-2.amazonaws.com/secure.notion-static.com/b521d0e0-9f6a-460b-9382-bd1f8847539c/Untitled.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20220528%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20220528T223403Z&X-Amz-Expires=86400&X-Amz-Signature=517090db5d90f1691e93fb9f1f2ac4ef525ea6910881988f14c1d670cacd1bb5&X-Amz-SignedHeaders=host&response-content-disposition=filename%20%3D%22Untitled.png%22&x-id=GetObject)

ìµœì´ˆ ë°°ì—´ ì¸ë±ìŠ¤ 3,4ì— í•´ë‹¹í•˜ëŠ” ì›ì†Œ 2ì™€ 9 ë˜í•œ ì˜¤ë¦„ì°¨ìˆœ ê´€ê³„ì´ë¯€ë¡œ ì—­ìˆœ ì¡°í•©ì— í•´ë‹¹í•˜ì§€ ì•ŠëŠ”ë‹¤.

![array#6](https://s3.us-west-2.amazonaws.com/secure.notion-static.com/86954d8a-d710-4131-960c-9c295cd67b15/Untitled.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20220528%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20220528T223405Z&X-Amz-Expires=86400&X-Amz-Signature=cbe8923c266ce16ea7fc9d6cc9582b3ee16558dab589d494f5dea93918995f40&X-Amz-SignedHeaders=host&response-content-disposition=filename%20%3D%22Untitled.png%22&x-id=GetObject)

ìµœì´ˆ ë°°ì—´ ì¸ë±ìŠ¤ 3,4,5ì— í•´ë‹¹í•˜ëŠ” ë°°ì—´ [2,9]ì™€ ì›ì†Œ 7 ì¤‘ 9ì™€ 7ì€ ë‚´ë¦¼ì°¨ìˆœ ê´€ê³„ì´ë¯€ë¡œ ì—­ìˆœ ì¡°í•©ì— í•´ë‹¹í•œë‹¤. ë”°ë¼ì„œ í˜„ì¬ê¹Œì§€ ì—­ìˆœ ì¡°í•©ì˜ ëˆ„ì  ê°¯ìˆ˜ëŠ” 1ì´ë‹¤.

![array#7](https://s3.us-west-2.amazonaws.com/secure.notion-static.com/6a8234a0-9950-4a9f-9686-304521fa7301/Untitled.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20220528%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20220528T223013Z&X-Amz-Expires=86400&X-Amz-Signature=17c66487e0f917ab1b1ca015fe17b9dcb6ceb91331d8797eebc3d0ecb038f14f&X-Amz-SignedHeaders=host&response-content-disposition=filename%20%3D%22Untitled.png%22&x-id=GetObject)

ì¢Œì¸¡ ë°°ì—´ [2,3,9]ì™€ ìš°ì¸¡ ë°°ì—´ [2,7,9] ì¤‘ ë‚´ë¦¼ì°¨ìˆœ ê´€ê³„ì— í•´ë‹¹í•˜ëŠ” ì›ì†Œ ì¡°í•©ì€ 3-2, 9-2, 9-7ë¡œ ì´ 3ê°œì´ë‹¤. ë”°ë¼ì„œ í˜„ì¬ê¹Œì§€ ì—­ìˆœ ì¡°í•©ì˜ ëˆ„ì  ê°¯ìˆ˜ëŠ” 4ì´ë‹¤.

![array#8](https://s3.us-west-2.amazonaws.com/secure.notion-static.com/316d803d-fc13-4cb1-84a8-0cfd01808c7a/Untitled.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20220528%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20220528T223409Z&X-Amz-Expires=86400&X-Amz-Signature=fc4cc87e3e176d3bafe4117c8c94c8ae3e7b33ac616d4d41da40c18f06a94674&X-Amz-SignedHeaders=host&response-content-disposition=filename%20%3D%22Untitled.png%22&x-id=GetObject)

ë°°ì—´ì˜ ì •ë ¬ì´ ì™„ë£Œë˜ì—ˆìœ¼ë¯€ë¡œ ë¹„êµí•  ì¢Œ ìš° ë°°ì—´ì´ ì¡´ì¬í•˜ì§€ ì•ŠëŠ”ë‹¤. ë”°ë¼ì„œ ìµœì¢… ì—­ìˆœ ì¡°í•©ì˜ ê°¯ìˆ˜ëŠ” 4ë¡œ ìµœì´ˆ ë°°ì—´ì˜ ì—­ìˆœ ì¡°í•©ì˜ ê°¯ìˆ˜ì™€ ë™ì¼í•¨ì„ ì•Œ ìˆ˜ ìˆë‹¤.

### êµ¬í˜„

```python
def merge(a, b):
    merged_array = []
    cnt = 0

    i, j = 0, 0
    while i < len(a) and j < len(b):
        if a[i] <= b[j]:
            merged_array.append(a[i])
            i += 1
        elif b[j] < a[i]:
            merged_array.append(b[j])
            j += 1
            cnt += 1

    if i != len(a):
        merged_array += a[i:]
    if j != len(b):
        merged_array += b[j:]

    return merged_array, cnt

def merge_sort(array, l, r):
    if l >= r:
        return [array[l]], 0

    mid = (l + r) // 2

    a, cnt_a = merge_sort(array, l, mid)
    b, cnt_b = merge_sort(array, mid + 1, r)

    sorted_array, inversion_cnt = merge(a, b)
    inversion_cnt += cnt_a + cnt_b
    return sorted_array, inversion_cnt

def get_number_of_inversions(a, b, left, right):
    sorted_array, number_of_inversions = merge_sort(a, left, right - 1)
    return number_of_inversions

```

ìœ„ ì½”ë“œëŠ” í•´ê²°ë°©ë²•ì„ ì°¾ê³ ë‚œ ë’¤, êµ¬í˜„í•œ ìµœì´ˆ ì½”ë“œì´ë‹¤. ë‹¹ë‹¹í•˜ê²Œ ì œì¶œì„ í–ˆìœ¼ë‚˜ í…ŒìŠ¤íŠ¸ë¥¼ í†µê³¼í•˜ì§€ ëª»í–ˆë‹¤. ë¬¸ì œê°€ ëœ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ëŠ” `[9, 8, 7, 3, 2, 1]` ìµœì´ˆë¶€í„° ë‚´ë¦¼ì°¨ìˆœìœ¼ë¡œ ì£¼ì–´ì§„ ë°°ì—´ì˜ ê²½ìš°ì˜€ë‹¤.

ë‚´ë¦¼ì°¨ìˆœì˜ ê²½ìš° ë˜í•œ í•´ê²°í•  ìˆ˜ ìˆë„ë¡ `merge(a, b)` í•¨ìˆ˜ë¥¼ ë‹¤ìŒê³¼ ê°™ì´ ì½”ë“œë¥¼ ìˆ˜ì •í•˜ì˜€ë‹¤.

```python
def merge(a, b):
    merged_array = []
    cnt = 0
    for i in range(len(a)):
        for j in range(len(b)):
            if a[i] > b[j]:
                cnt += 1
                continue
            if a[i] <= b[j]:
                break

    i, j = 0, 0
    while i < len(a) and j < len(b):
        if a[i] <= b[j]:
            merged_array.append(a[i])
            i += 1
						# added for descending order case
            if j > 0 and i < len(a):
                for c in range(0, j):
                    if a[i] > b[c]:
                        cnt += 1
        elif b[j] < a[i]:
            merged_array.append(b[j])
            j += 1
            cnt += 1

    if i != len(a):
        merged_array += a[i:]
				# added for descending order case
				i += 1
        cnt += (len(a) - i) * len(b)
        for c in range(i, len(a)):
            for d in range(len(b)):
                if a[c] > b[d]:
                    cnt += 1
                    continue
                else:
                    break
    if j != len(b):
        merged_array += b[j:]

    return merged_array, cnt

```

ìˆ˜ì •ëœ ë¶€ë¶„ì€ while ë°˜ë³µë¬¸ ë‚´ë¶€ì˜ ì²«ë²ˆì§¸ ë¶„ê¸°ì™€ ë°˜ë³µë¬¸ì„ ë¹ ì ¸ë‚˜ê°„ í›„ ì²« ë²ˆì§¸ ì¡°ê±´ë¬¸ì´ë‹¤. ì²« ë²ˆì§¸ ìˆ˜ì •ëœ ì½”ë“œëŠ” $a[i-1] < b[j]$ ì¸ ê²½ìš°ì— `a[i]`ì™€ `b[0,â€¦,j-1]`ì„ ë¹„êµí•´ ì—­ìˆœ ì¡°í•©ì„ ì°¾ì•„ë‚´ëŠ” ì—­í• ì„ í•œë‹¤. ë‘ ë²ˆì§¸ ë¶€ë¶„ì€ ë°°ì—´ `b`ì˜ ë°˜ë³µì´ ë¨¼ì € ì¢…ë£Œë˜ì—ˆì„ë•Œ ë°°ì—´ `a`ì˜ ë‚˜ë¨¸ì§€ ì›ì†Œë“¤ê³¼ ë°°ì—´ `b`ì˜ ì›ì†Œë“¤ì„ ë¹„êµí•˜ì—¬ ì—­ìˆœ ì¡°í•©ì„ ì°¾ëŠ” ì—­í• ì„ í•œë‹¤.

í•´ë‹¹ ì½”ë“œë¥¼ ì œì¶œí•˜ë‹ˆ ê¸°ì¡´ ì œì¶œ ì½”ë“œì—ì„œ ë¬¸ì œê°€ ë˜ì—ˆë˜ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ `[9, 8, 7, 3, 2, 1]`ëŠ” ë¬´ë‚œí•˜ê²Œ í†µê³¼í•˜ì˜€ë‹¤. í•˜ì§€ë§Œ ì´í›„ ë°°ì—´ì˜ í¬ê¸°ê°€ í° ì¼€ì´ìŠ¤ì—ì„œ timeoutì´ ë°œìƒë˜ë©° í†µê³¼í•˜ì§€ ëª»í•˜ì˜€ë‹¤.

ì›ì¸ì€ ê¸°ì¡´ì— ì¶”ê°€í•œ ì½”ë“œì˜ ì‹œê°„ë³µì¡ë„ê°€ ë„ˆë¬´ ë†’ì•˜ê¸° ë•Œë¬¸ì´ë‹¤.

ìˆ˜ì •ëœ ë‘ ë¶€ë¶„ ëª¨ë‘ ë°˜ë³µì„ í†µí•´ ì½”ë“œë¥¼ ì§ì ‘ ë¹„êµí•˜ë©°, ë‘ ë²ˆì§¸ íŒŒíŠ¸ëŠ” ì´ì¤‘ ë°˜ë³µì´ ìˆ˜í–‰ëœë‹¤. ë”°ë¼ì„œ í•´ë‹¹ ë°˜ë³µë¬¸ë“¤ì„ ì œê±°í•´ì¤„ ìƒˆë¡œìš´ ë°©ì‹ì´ í•„ìš”í–ˆë‹¤.

í•´ê²°ì±…ì€ ìƒê°ë³´ë‹¤ ê°„ë‹¨í–ˆë‹¤. ì´ë¯¸ ì˜¤ë¦„ì°¨ìˆœìœ¼ë¡œ ì •ë ¬ëœ ë°°ì—´ë“¤ê°„ì˜ ë¹„êµì˜€ìœ¼ë¯€ë¡œ, $a[i-1] > b[j-1]$ë¼ë©´ $a[i] > b[0,â€¦,j-1]$ì´ ì„±ë¦½ëœë‹¤. ë”°ë¼ì„œ ì´ ê²½ìš° ì¶”ê°€ë˜ëŠ” ì—­ìˆœ ì¡°í•©ì˜ ê°¯ìˆ˜ëŠ” `j`ê°€ ëœë‹¤.

ë‘ ë²ˆì§¸ ê²½ìš° ë˜í•œ ê°™ì€ ë§¥ë½ìœ¼ë¡œ, $i < len(a)$ì´ë©° ëª¨ë“  $j$ì— ëŒ€í•´ $a[i] > b[j]$ê°€ ì„±ë¦½ë˜ë©´ ì¶”ê°€ë˜ëŠ” ì—­ìˆœ ì¡°í•©ì˜ ê°¯ìˆ˜ëŠ” `j * (len(a) - i)` ê°€ ëœë‹¤.

```python
def merge(a, b):
    merged_array = []
    cnt = 0

    i, j = 0, 0
    while i < len(a) and j < len(b):
        if a[i] <= b[j]:
            merged_array.append(a[i])
            i += 1
            if j > 0 and i < len(a):      # fixed code
                cnt += j
        elif b[j] < a[i]:
            merged_array.append(b[j])
            j += 1
            cnt += 1
            if DEBUG:
                print(f'a = {a}, b = {b}, i = {i}, j = {j}, cnt = {cnt}')

    if i != len(a):
        merged_array += a[i:]
        i += 1
        cnt += (len(a) - i) * len(b)      # fixed code
    if j != len(b):
        merged_array += b[j:]

    return merged_array, cnt

```

ìœ„ ì½”ë“œëŠ” ìµœì¢…ì ìœ¼ë¡œ ì œì¶œí•œ ì½”ë“œì˜ `merge(a, b)`í•¨ìˆ˜ì´ë©°, ëª¨ë“  ì¼€ì´ìŠ¤ë¥¼ í†µê³¼í•¨ìœ¼ë¡œì¨ í•´ë‹¹ ê³¼ì œë¥¼ íŒ¨ìŠ¤í•  ìˆ˜ ìˆì—ˆë‹¤.
